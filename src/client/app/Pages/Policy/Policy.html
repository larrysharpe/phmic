<section id="dashboard-view" class="view">
    <div class="container">
        <div class="row">
            <div class="col-xs-12">

                <div class="content-box content-container">
                    <div class="content-box-header">
                        <h2 content-box-title>Policy Details</h2>
                    </div>
                    <div class="content-box-body">
                        <p>
                            Need to look at another policy? Use the drop-down below to select the policy you want.
                        </p>
                        <p>
                            <strong>Select a Policy</strong>
                            <select
                                ng-options="p.TypeName + ' ' + p.PolicyNum for p in $ctrl.client.policies"
                                ng-change="$ctrl.switchPages()"
                                ng-model="$ctrl.selectedPolicy"></select>
                        </p>
                        <p class="text-right">
                            <a class="btn btn-danger" href="/dashboard">
                                <i class="fa fa-home" aria-hidden="true"></i> Return to home
                            </a>
                        </p>

                        <hr class="separator">

                        <h3>{{$ctrl.policy.TypeName}} Policy</h3>
                        <div class="row">
                            <div class="col-md-6">
                                <h3>Client Information</h3>
                                <div class="row" ng-repeat="field in $ctrl.displayFields.ClientInformation">
                                    <div class="col-md-6">
                                        <strong>{{field.displayName}}</strong>
                                    </div>
                                    <div class="col-md-6">
                                        {{$ctrl.policy[field.name]}}
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h3>Policy Information</h3>
                                <div class="row" ng-repeat="field in $ctrl.displayFields.PolicyInformation">
                                    <div class="col-md-6">
                                        <strong>{{field.displayName}}</strong>
                                    </div>
                                    <div class="col-md-6">
                                        {{$ctrl.policy[field.name]}}
                                    </div>
                                </div>
                            </div>
                        </div>


                        {{$ctrl.showDriverInformation}}


                        <div ng-if="$ctrl.showDriverInformation">
                            <h3>Driver Information</h3>
                            <div class="row">
                                <div class="col-md-6" ng-repeat="driver in $ctrl.policy.data.drivers">
                                    <div class="row" ng-repeat="field in $ctrl.displayFields.DriverInformation">
                                        <div class="col-md-6">
                                            <strong>{{field.displayName}}</strong>
                                        </div>
                                        <div class="col-md-6">
                                            {{driver[field.name]}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div>
                            <h3>Unit Information</h3>
                            <div class="row">
                                <div class="col-md-6" ng-repeat="unit in $ctrl.policy.data.units">
                                    <div class="row" ng-repeat="field in $ctrl.displayFields.UnitInformation">
                                        <div class="col-md-6">
                                            <strong>{{field.displayName}}</strong>
                                        </div>
                                        <div class="col-md-6">
                                            {{unit[field.name]}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h3>Policy Interests</h3>
                        <table class="table table-bordered table-responsive table-striped">
                            <tr class="active">
                                <th ng-repeat="header in $ctrl.displayFields.PolicyInterests">{{header.displayName}}</th>
                            </tr>
                            <tr ng-repeat="item in $ctrl.policy.data.personalInterests">
                                <td ng-repeat="header in $ctrl.displayFields.PolicyInterests">{{item[header.name]}}</td>
                            </tr>
                        </table>


                        <div class="col-sm-6" ng-repeat="(k,vehicle) in $ctrl.policy.vehicles">
                            <h3>Vehicle {{k + 1}}</h3>
                            <p>{{vehicle.desc}}</p>
                            <table class="table table-striped table-border" ng-hide="!vehicle.showCoverage">
                                <tr>
                                    <th>Coverage</th>
                                    <th>Limit</th>
                                    <th>Deductible</th>
                                </tr>
                                <tr ng-repeat="(i, coverage) in vehicle.coverages">
                                    <td>{{coverage.name}}</td>
                                    <td>{{coverage.limit}}</td>
                                    <td>{{coverage.deductible}}</td>
                                </tr>
                            </table>
                            <p class="text-right">
                                <button class="btn btn-primary" ng-hide="vehicle.showCoverage" ng-click="$ctrl.showCoverage(k)">View Coverages</button>
                                <button class="btn btn-danger" ng-hide="!vehicle.showCoverage" ng-click="$ctrl.hideCoverage(k)">Hide Coverages</button>
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>
